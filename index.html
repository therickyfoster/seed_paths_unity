<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Seed Paths Unity ‚Äî –†–æ—Å—Å–∏—è: –ö–∞—Å–∫–∞–¥—ã –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è</title>

<style>
    :root {
        --bg: #0c0f17;
        --fg: #e6e6e6;
        --accent: #8ab4ff;
        --accent2: #6dd4a8;
        --accent3: #ffb86c;
        --warn: #ff6b6b;
        --success: #51cf66;
    }
    
    * {
        box-sizing: border-box;
    }
    
    body {
        margin: 0;
        background: var(--bg);
        color: var(--fg);
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, sans-serif;
        overflow-x: hidden;
    }

    /* Constellation Background */
    #constellation {
        position: fixed;
        inset: 0;
        z-index: 0;
        pointer-events: none;
        opacity: 0.15;
    }

    /* Content Layer */
    .content-layer {
        position: relative;
        z-index: 1;
    }

    /* Splash Screen */
    #splash {
        position: fixed;
        inset: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-direction: column;
        background: linear-gradient(135deg, var(--bg) 0%, #1a1f2e 100%);
        opacity: 0;
        animation: splashFade 1.8s ease forwards;
    }
    
    @keyframes splashFade {
        0% { opacity: 0; transform: scale(0.95); }
        100% { opacity: 1; transform: scale(1); }
    }
    
    h1 {
        font-weight: 500;
        font-size: clamp(1.8rem, 5vw, 2.5rem);
        margin-bottom: 0.4em;
        text-align: center;
        background: linear-gradient(135deg, var(--accent) 0%, var(--accent2) 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        padding: 0 20px;
    }
    
    .subtitle {
        opacity: 0.7;
        text-align: center;
        margin-bottom: 2em;
        padding: 0 20px;
        max-width: 600px;
        line-height: 1.6;
    }

    /* Progress Badge */
    .progress-badge {
        position: fixed;
        top: 20px;
        right: 20px;
        background: rgba(255,255,255,0.08);
        border: 1px solid rgba(255,255,255,0.15);
        border-radius: 12px;
        padding: 12px 16px;
        font-size: 0.9rem;
        z-index: 100;
        backdrop-filter: blur(10px);
        display: flex;
        align-items: center;
        gap: 8px;
    }

    .progress-badge .icon {
        font-size: 1.2rem;
    }

    /* Main Container */
    #menu, #storyPage, #progressPage {
        display: none;
        position: absolute;
        inset: 0;
        padding: 20px;
        animation: fadeIn 1s ease forwards;
        overflow-y: auto;
    }

    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(20px); }
        to   { opacity: 1; transform: translateY(0); }
    }

    /* Navigation Header */
    .nav-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 30px;
        flex-wrap: wrap;
        gap: 15px;
    }

    .nav-title {
        font-size: 1.5rem;
        font-weight: 500;
    }

    .nav-actions {
        display: flex;
        gap: 10px;
    }

    /* Choice Cards */
    .choice-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 20px;
        max-width: 1200px;
        margin: 0 auto;
        padding-bottom: 40px;
    }

    .choice-card {
        background: rgba(255,255,255,0.06);
        border: 1px solid rgba(255,255,255,0.12);
        border-radius: 16px;
        padding: 24px;
        cursor: pointer;
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
    }

    .choice-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: linear-gradient(90deg, var(--accent), var(--accent2));
        transform: scaleX(0);
        transform-origin: left;
        transition: transform 0.3s ease;
    }

    .choice-card:hover {
        background: rgba(255,255,255,0.1);
        transform: translateY(-4px);
        box-shadow: 0 8px 24px rgba(0,0,0,0.3);
    }

    .choice-card:hover::before {
        transform: scaleX(1);
    }

    .choice-card.completed {
        border-color: var(--success);
        background: rgba(81, 207, 102, 0.08);
    }

    .choice-card-icon {
        font-size: 2.5rem;
        margin-bottom: 12px;
    }

    .choice-card-title {
        font-size: 1.3rem;
        font-weight: 500;
        margin-bottom: 8px;
        color: var(--accent);
    }

    .choice-card-desc {
        opacity: 0.8;
        line-height: 1.5;
        font-size: 0.95rem;
    }

    .choice-card-status {
        margin-top: 12px;
        font-size: 0.85rem;
        color: var(--success);
        font-weight: 500;
    }

    /* Story Content */
    .story-container {
        max-width: 800px;
        margin: 0 auto;
        padding-bottom: 60px;
    }

    #storyText {
        line-height: 1.8;
        font-size: 1.15rem;
        margin-bottom: 30px;
    }

    #storyText p {
        margin-bottom: 1.5em;
    }

    #storyText strong {
        color: var(--accent2);
    }

    #storyText em {
        color: var(--accent);
        font-style: normal;
    }

    /* Story Choices */
    .story-choices {
        display: flex;
        flex-direction: column;
        gap: 15px;
        margin-top: 30px;
    }

    .story-choice-btn {
        padding: 18px 24px;
        background: rgba(255,255,255,0.08);
        border: 2px solid rgba(255,255,255,0.15);
        border-radius: 12px;
        color: var(--fg);
        cursor: pointer;
        transition: all 0.3s ease;
        text-align: left;
        font-size: 1rem;
        line-height: 1.5;
        position: relative;
        overflow: hidden;
    }

    .story-choice-btn::after {
        content: '‚Üí';
        position: absolute;
        right: 24px;
        top: 50%;
        transform: translateY(-50%) translateX(0);
        opacity: 0;
        transition: all 0.3s ease;
    }

    .story-choice-btn:hover {
        background: rgba(255,255,255,0.14);
        border-color: var(--accent);
        padding-right: 50px;
    }

    .story-choice-btn:hover::after {
        opacity: 1;
        transform: translateY(-50%) translateX(0);
    }

    /* Buttons */
    .btn {
        padding: 12px 24px;
        border-radius: 10px;
        border: 1px solid rgba(255,255,255,0.2);
        background: rgba(255,255,255,0.08);
        color: var(--fg);
        cursor: pointer;
        transition: all 0.3s ease;
        font-size: 1rem;
        font-family: inherit;
        display: inline-flex;
        align-items: center;
        gap: 8px;
    }

    .btn:hover {
        background: rgba(255,255,255,0.15);
        transform: translateY(-2px);
    }

    .btn-primary {
        background: linear-gradient(135deg, var(--accent) 0%, var(--accent2) 100%);
        border: none;
        font-weight: 500;
    }

    .btn-primary:hover {
        filter: brightness(1.1);
    }

    /* Progress Page */
    .progress-grid {
        display: grid;
        gap: 20px;
        max-width: 1000px;
        margin: 0 auto;
    }

    .progress-section {
        background: rgba(255,255,255,0.06);
        border: 1px solid rgba(255,255,255,0.12);
        border-radius: 16px;
        padding: 24px;
    }

    .progress-section h3 {
        margin-top: 0;
        margin-bottom: 20px;
        color: var(--accent2);
    }

    .progress-bar-container {
        background: rgba(255,255,255,0.1);
        border-radius: 8px;
        height: 12px;
        overflow: hidden;
        margin: 15px 0;
    }

    .progress-bar {
        height: 100%;
        background: linear-gradient(90deg, var(--accent), var(--accent2));
        transition: width 0.6s ease;
        border-radius: 8px;
    }

    .progress-stats {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 15px;
        margin-top: 20px;
    }

    .stat-box {
        background: rgba(255,255,255,0.05);
        padding: 15px;
        border-radius: 10px;
        text-align: center;
    }

    .stat-value {
        font-size: 2rem;
        font-weight: 600;
        color: var(--accent2);
    }

    .stat-label {
        font-size: 0.9rem;
        opacity: 0.7;
        margin-top: 5px;
    }

    /* Achievement Badge */
    .achievement {
        display: flex;
        align-items: center;
        gap: 15px;
        padding: 15px;
        background: rgba(255,255,255,0.05);
        border-radius: 10px;
        margin: 10px 0;
        border-left: 4px solid var(--accent2);
    }

    .achievement-icon {
        font-size: 2rem;
    }

    .achievement-text {
        flex: 1;
    }

    .achievement-title {
        font-weight: 500;
        margin-bottom: 4px;
    }

    .achievement-desc {
        font-size: 0.9rem;
        opacity: 0.7;
    }

    /* Page Turn Animation */
    .page-turn-out {
        animation: turnPageOut 0.6s ease forwards;
    }

    .page-turn-in {
        animation: turnPageIn 0.6s ease forwards;
    }

    @keyframes turnPageOut {
        0% { opacity: 1; transform: translateX(0) rotateY(0); }
        100% { opacity: 0; transform: translateX(-100px) rotateY(-90deg); }
    }

    @keyframes turnPageIn {
        0% { opacity: 0; transform: translateX(100px) rotateY(90deg); }
        100% { opacity: 1; transform: translateX(0) rotateY(0); }
    }

    /* Impact Visualization */
    .impact-visual {
        margin: 30px 0;
        padding: 20px;
        background: linear-gradient(135deg, rgba(138,180,255,0.1), rgba(109,212,168,0.1));
        border-radius: 12px;
        border: 1px solid rgba(255,255,255,0.1);
    }

    .impact-stat {
        font-size: 2.5rem;
        font-weight: 600;
        color: var(--accent2);
        text-align: center;
        margin-bottom: 10px;
    }

    .impact-label {
        text-align: center;
        opacity: 0.9;
    }

    /* Responsive */
    @media (max-width: 768px) {
        .choice-grid {
            grid-template-columns: 1fr;
        }
        
        .progress-badge {
            position: static;
            margin: 0 auto 20px;
        }

        .nav-header {
            flex-direction: column;
            text-align: center;
        }

        h1 {
            font-size: 1.8rem;
        }
    }

    /* Accessibility */
    .sr-only {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0,0,0,0);
        white-space: nowrap;
        border: 0;
    }

    *:focus-visible {
        outline: 2px solid var(--accent);
        outline-offset: 2px;
    }

    /* Loading State */
    .loading {
        text-align: center;
        padding: 40px;
        opacity: 0.6;
    }

    .loading::after {
        content: '...';
        animation: dots 1.5s steps(4, end) infinite;
    }

    @keyframes dots {
        0%, 20% { content: '.'; }
        40% { content: '..'; }
        60%, 100% { content: '...'; }
    }
</style>

</head>
<body>

<!-- Constellation Background -->
<canvas id="constellation" aria-hidden="true"></canvas>

<div class="content-layer">

<!-- Progress Badge -->
<div class="progress-badge" id="progressBadge" style="display:none;">
    <span class="icon" aria-hidden="true">üå±</span>
    <span id="progressText">0 –∏–∑ 9 –ø—Ä–æ–π–¥–µ–Ω–æ</span>
</div>

<!-- SPLASH SCREEN -->
<div id="splash">
    <h1>Seed Paths Unity ‚Äî –†–æ—Å—Å–∏—è</h1>
    <div class="subtitle">
        –≠–∫–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ –∫–∞—Å–∫–∞–¥—ã –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è<br>
        –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è ¬∑ –í–µ—Ç–≤—è—â–∏–µ—Å—è —Ä–µ—à–µ–Ω–∏—è ¬∑ –ú–∏—Å—Å–∏—è –±—É–¥—É—â–µ–≥–æ<br>
        <em>–ö–∞–∂–¥–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ —Å–æ–∑–¥–∞—ë—Ç —ç—Ñ—Ñ–µ–∫—Ç –¥–æ–º–∏–Ω–æ –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–ª–∞–Ω–µ—Ç—ã</em>
    </div>
    <button class="btn btn-primary" onclick="showMenu()" aria-label="–ù–∞—á–∞—Ç—å –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ">
        <span aria-hidden="true">üöÄ</span> –ù–∞—á–∞—Ç—å –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ
    </button>
</div>

<!-- MAIN MENU -->
<div id="menu">
    <div class="nav-header">
        <h2 class="nav-title">–í—ã–±–µ—Ä–∏—Ç–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è</h2>
        <div class="nav-actions">
            <button class="btn" onclick="showProgress()" aria-label="–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å">
                <span aria-hidden="true">üìä</span> –ü—Ä–æ–≥—Ä–µ—Å—Å
            </button>
        </div>
    </div>

    <div class="choice-grid">
        <!-- Urban Restoration -->
        <div class="choice-card" data-path="canopy" onclick="openStory('canopy', 0)" role="button" tabindex="0" aria-label="–ì–æ—Ä–æ–¥—Å–∫–∏–µ –∑–µ–ª—ë–Ω—ã–µ –∫–æ—Ä–∏–¥–æ—Ä—ã">
            <div class="choice-card-icon" aria-hidden="true">üå≥</div>
            <div class="choice-card-title">–ì–æ—Ä–æ–¥—Å–∫–∏–µ –∑–µ–ª—ë–Ω—ã–µ –∫–æ—Ä–∏–¥–æ—Ä—ã</div>
            <div class="choice-card-desc">–°–æ–∑–¥–∞–π—Ç–µ —Å–µ—Ç—å –∂–∏–≤—ã—Ö –∫–æ—Ä–∏–¥–æ—Ä–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –æ—Ö–ª–∞–∂–¥–∞—é—Ç –≥–æ—Ä–æ–¥ –∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –ø—Ä–∏—Ä–æ–¥—É –≤ –±–µ—Ç–æ–Ω–Ω—ã–µ –¥–∂—É–Ω–≥–ª–∏. –¢—Ä–∏ —É—Ä–æ–≤–Ω—è –≥–æ—Ä–æ–¥—Å–∫–æ–≥–æ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è.</div>
            <div class="choice-card-status" style="display:none;">‚úì –ó–∞–≤–µ—Ä—à–µ–Ω–æ</div>
        </div>

        <!-- Seed Paths -->
        <div class="choice-card" data-path="seedpaths" onclick="openStory('seedpaths', 0)" role="button" tabindex="0" aria-label="–°–µ–º–µ–Ω–Ω—ã–µ —Ç—Ä–æ–ø—ã –¥–ª—è –¥–µ—Ç–µ–π">
            <div class="choice-card-icon" aria-hidden="true">üå∏</div>
            <div class="choice-card-title">–°–µ–º–µ–Ω–Ω—ã–µ —Ç—Ä–æ–ø—ã –¥–ª—è –¥–µ—Ç–µ–π</div>
            <div class="choice-card-desc">–ü—Ä–µ–≤—Ä–∞—Ç–∏—Ç–µ –º–∞—Ä—à—Ä—É—Ç—ã –≤ —à–∫–æ–ª—É –≤ –∂–∏–≤—ã–µ –∫–ª–∞—Å—Å—ã –ø—Ä–∏—Ä–æ–¥—ã. –î–µ—Ç–∏ —É—á–∞—Ç—Å—è, —Ä–∞—Å—Ç–µ–Ω–∏—è –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è, —Å–æ–æ–±—â–µ—Å—Ç–≤–æ —Ä–∞—Å—Ü–≤–µ—Ç–∞–µ—Ç.</div>
            <div class="choice-card-status" style="display:none;">‚úì –ó–∞–≤–µ—Ä—à–µ–Ω–æ</div>
        </div>

        <!-- River Restoration -->
        <div class="choice-card" data-path="dnieper" onclick="openStory('dnieper', 0)" role="button" tabindex="0" aria-label="–î–Ω–µ–ø—Ä–æ–≤—Å–∫–∏–π —ç–∫–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –ø—É—Ç—å">
            <div class="choice-card-icon" aria-hidden="true">üåä</div>
            <div class="choice-card-title">–î–Ω–µ–ø—Ä–æ–≤—Å–∫–∏–π —ç–∫–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –ø—É—Ç—å</div>
            <div class="choice-card-desc">–†–µ–∫–∞ –Ω–µ –∑–Ω–∞–µ—Ç –≥—Ä–∞–Ω–∏—Ü. –û–±—ä–µ–¥–∏–Ω–∏—Ç–µ—Å—å –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –≤–µ–ª–∏–∫–æ–≥–æ –≤–æ–¥–Ω–æ–≥–æ –ø—É—Ç–∏ —á–µ—Ä–µ–∑ —Å–æ–≤–º–µ—Å—Ç–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —ç–∫–æ—Å–∏—Å—Ç–µ–º.</div>
            <div class="choice-card-status" style="display:none;">‚úì –ó–∞–≤–µ—Ä—à–µ–Ω–æ</div>
        </div>
    </div>
</div>

<!-- STORY PAGE -->
<div id="storyPage">
    <div class="nav-header">
        <button class="btn" onclick="goBack()" aria-label="–í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –º–µ–Ω—é">
            <span aria-hidden="true">‚Üê</span> –ù–∞–∑–∞–¥
        </button>
        <div class="nav-actions">
            <button class="btn" onclick="resetStory()" aria-label="–ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ">
                <span aria-hidden="true">‚Ü∫</span> –ó–∞–Ω–æ–≤–æ
            </button>
        </div>
    </div>

    <div class="story-container">
        <div id="storyText" role="article"></div>
        <div id="storyChoices" class="story-choices"></div>
    </div>
</div>

<!-- PROGRESS PAGE -->
<div id="progressPage">
    <div class="nav-header">
        <h2 class="nav-title">–í–∞—à –ø—É—Ç—å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è</h2>
        <button class="btn" onclick="goBackToMenu()" aria-label="–í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –º–µ–Ω—é">
            <span aria-hidden="true">‚Üê</span> –í –º–µ–Ω—é
        </button>
    </div>

    <div class="progress-grid">
        <div class="progress-section">
            <h3>–û–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å</h3>
            <div class="progress-bar-container">
                <div class="progress-bar" id="totalProgressBar" style="width: 0%"></div>
            </div>
            <p style="text-align:center; opacity:0.8; margin-top:10px;">
                <span id="totalProgressText">0 –∏–∑ 9</span> —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –∑–∞–≤–µ—Ä—à–µ–Ω–æ
            </p>

            <div class="progress-stats">
                <div class="stat-box">
                    <div class="stat-value" id="scenariosCompleted">0</div>
                    <div class="stat-label">–°—Ü–µ–Ω–∞—Ä–∏–∏</div>
                </div>
                <div class="stat-box">
                    <div class="stat-value" id="decisionsMade">0</div>
                    <div class="stat-label">–†–µ—à–µ–Ω–∏—è</div>
                </div>
                <div class="stat-box">
                    <div class="stat-value" id="pathsExplored">0</div>
                    <div class="stat-label">–ü—É—Ç–∏</div>
                </div>
            </div>
        </div>

        <div class="progress-section">
            <h3>–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h3>
            <div id="achievementsList"></div>
        </div>

        <div class="progress-section">
            <h3>–°–æ–≤–æ–∫—É–ø–Ω–æ–µ –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏–µ</h3>
            <p style="opacity:0.8; margin-bottom:20px;">
                –í–∞—à–∏ –≤—ã–±–æ—Ä—ã –≤ –∏—Å—Ç–æ—Ä–∏—è—Ö –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è. –í–æ—Ç –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–µ –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏–µ:
            </p>
            <div class="impact-visual">
                <div class="impact-stat" id="impactTrees">0</div>
                <div class="impact-label">–¥–µ—Ä–µ–≤—å–µ–≤ –ø–æ—Å–∞–∂–µ–Ω–æ</div>
            </div>
            <div class="impact-visual">
                <div class="impact-stat" id="impactArea">0</div>
                <div class="impact-label">–≥–µ–∫—Ç–∞—Ä–æ–≤ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ</div>
            </div>
            <div class="impact-visual">
                <div class="impact-stat" id="impactCO2">0</div>
                <div class="impact-label">—Ç–æ–Ω–Ω CO‚ÇÇ –ø–æ–≥–ª–æ—â–µ–Ω–æ –µ–∂–µ–≥–æ–¥–Ω–æ</div>
            </div>
        </div>

        <div class="progress-section">
            <h3>–≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö</h3>
            <p style="opacity:0.8; margin-bottom:15px;">
                –°–∫–∞—á–∞–π—Ç–µ —Å–≤–æ–π –ø—Ä–æ–≥—Ä–µ—Å—Å –¥–ª—è –∞–≤—Ç–æ–Ω–æ–º–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–ª–∏ –æ–±–º–µ–Ω–∞ —Å –≤–∞—à–∏–º —Å–æ–æ–±—â–µ—Å—Ç–≤–æ–º.
            </p>
            <button class="btn btn-primary" onclick="exportProgress()" aria-label="–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å">
                <span aria-hidden="true">üíæ</span> –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å (JSON)
            </button>
        </div>
    </div>
</div>

</div>

<script>
/* ==========================================================
   CONSTELLATION BACKGROUND
   ========================================================== */
const canvas = document.getElementById('constellation');
const ctx = canvas.getContext('2d');
let stars = [];
let connections = [];

function initConstellation() {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
    
    const starCount = Math.floor((canvas.width * canvas.height) / 15000);
    stars = [];
    
    for (let i = 0; i < starCount; i++) {
        stars.push({
            x: Math.random() * canvas.width,
            y: Math.random() * canvas.height,
            vx: (Math.random() - 0.5) * 0.2,
            vy: (Math.random() - 0.5) * 0.2,
            radius: Math.random() * 1.5 + 0.5
        });
    }
}

function drawConstellation() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    
    // Update and draw stars
    stars.forEach(star => {
        star.x += star.vx;
        star.y += star.vy;
        
        if (star.x < 0 || star.x > canvas.width) star.vx *= -1;
        if (star.y < 0 || star.y > canvas.height) star.vy *= -1;
        
        ctx.fillStyle = 'rgba(138, 180, 255, 0.6)';
        ctx.beginPath();
        ctx.arc(star.x, star.y, star.radius, 0, Math.PI * 2);
        ctx.fill();
    });
    
    // Draw connections
    ctx.strokeStyle = 'rgba(138, 180, 255, 0.15)';
    ctx.lineWidth = 0.5;
    
    for (let i = 0; i < stars.length; i++) {
        for (let j = i + 1; j < stars.length; j++) {
            const dx = stars[i].x - stars[j].x;
            const dy = stars[i].y - stars[j].y;
            const dist = Math.sqrt(dx * dx + dy * dy);
            
            if (dist < 150) {
                ctx.beginPath();
                ctx.moveTo(stars[i].x, stars[i].y);
                ctx.lineTo(stars[j].x, stars[j].y);
                ctx.stroke();
            }
        }
    }
    
    requestAnimationFrame(drawConstellation);
}

window.addEventListener('resize', initConstellation);
initConstellation();
drawConstellation();

/* ==========================================================
   STORY DATA STRUCTURE
   ========================================================== */
const storyData = {
    canopy: {
        title: "–ì–æ—Ä–æ–¥—Å–∫–∏–µ –∑–µ–ª—ë–Ω—ã–µ –∫–æ—Ä–∏–¥–æ—Ä—ã",
        icon: "üå≥",
        nodes: [
            {
                text: `–í –≤–∞—à–µ–º –≥–æ—Ä–æ–¥–µ –≤–æ–∑–¥—É—Ö —Ç—è–∂–µ–ª–µ–µ—Ç –ª–µ—Ç–æ–º, –∞ –∂–∞—Ä–∞ –¥–µ—Ä–∂–∏—Ç—Å—è –¥–æ–ª—å—à–µ, —á–µ–º —Ä–∞–Ω—å—à–µ. –£—á—ë–Ω—ã–µ –Ω–∞–∑—ã–≤–∞—é—Ç —ç—Ç–æ <em>¬´–æ—Å—Ç—Ä–æ–≤–∞–º–∏ —Ç–µ–ø–ª–∞¬ª</em>, –Ω–æ –∂–∏—Ç–µ–ª–∏ –∑–Ω–∞—é—Ç –¥—Ä—É–≥–æ–µ: <strong>—Ç–µ–Ω—å ‚Äî —ç—Ç–æ —Å–ø–∞—Å–µ–Ω–∏–µ</strong>.

–í—ã —Å—Ç–æ–∏—Ç–µ –Ω–∞ –ø–µ—Ä–µ–∫—Ä—ë—Å—Ç–∫–µ —Ä–µ—à–µ–Ω–∏—è: —Ç—Ä–∏ —à–∫–æ–ª—ã, –¥–≤–∞ –∂–∏–ª—ã—Ö –∫–≤–∞—Ä—Ç–∞–ª–∞, –∏ –æ–¥–∏–Ω –ø–∞—Ä–∫ –Ω—É–∂–¥–∞—é—Ç—Å—è –≤ –∑–µ–ª—ë–Ω—ã—Ö –∫–æ—Ä–∏–¥–æ—Ä–∞—Ö ‚Äî –Ω–æ —É –≤–∞—Å –µ—Å—Ç—å —Ä–µ—Å—É—Ä—Å—ã —Ç–æ–ª—å–∫–æ –Ω–∞ –æ–¥–Ω–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤ —ç—Ç–æ–º —Å–µ–∑–æ–Ω–µ.

–ì–æ—Ä–æ–¥—Å–∫–æ–π —Å–æ–≤–µ—Ç —Å–ª—É—à–∞–µ—Ç. –ß—Ç–æ –≤—ã –ø—Ä–µ–¥–ª–æ–∂–∏—Ç–µ –ø–µ—Ä–≤—ã–º?`,
                choices: [
                    { text: "üè´ –ù–∞—á–∞—Ç—å —Å–æ —à–∫–æ–ª—å–Ω—ã—Ö –¥–≤–æ—Ä–æ–≤ ‚Äî –¥–µ—Ç–∏ –ø—Ä–æ–≤–æ–¥—è—Ç —Ç–∞–º —á–∞—Å—ã –≤ –∂–∞—Ä—É", next: 1, impact: "trees:150" },
                    { text: "üèòÔ∏è –°–æ–µ–¥–∏–Ω–∏—Ç—å –∂–∏–ª—ã–µ –∫–≤–∞—Ä—Ç–∞–ª—ã –∑–µ–ª—ë–Ω—ã–º –∫–æ—Ä–∏–¥–æ—Ä–æ–º", next: 2, impact: "trees:200" },
                    { text: "üå≥ –†–∞—Å—à–∏—Ä–∏—Ç—å –ø–∞—Ä–∫ –∫–∞–∫ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –∑–µ–ª—ë–Ω—ã–π —Ö–∞–±", next: 3, impact: "trees:300" }
                ]
            },
            {
                text: `–†–µ—à–µ–Ω–∏–µ –ø—Ä–∏–Ω—è—Ç–æ: <strong>—à–∫–æ–ª—å–Ω—ã–µ –¥–≤–æ—Ä—ã —Å—Ç–∞–Ω—É—Ç –ø–µ—Ä–≤—ã–º–∏ –∑–µ–ª—ë–Ω—ã–º–∏ –æ—Å—Ç—Ä–æ–≤–∞–º–∏</strong>.

–í —Ç–µ—á–µ–Ω–∏–µ –≤–µ—Å–Ω—ã –≥—Ä—É–ø–ø—ã —Ä–æ–¥–∏—Ç–µ–ª–µ–π, —É—á–∏—Ç–µ–ª–µ–π –∏ —É—á–µ–Ω–∏–∫–æ–≤ —Å–∞–∂–∞—é—Ç –º–µ—Å—Ç–Ω—ã–µ –¥–µ—Ä–µ–≤—å—è ‚Äî –ª–∏–ø—ã, –¥—É–±—ã, –∫–ª—ë–Ω—ã. –ö –∫–æ–Ω—Ü—É –º–∞—è —à–∫–æ–ª—å–Ω—ã–µ –¥–≤–æ—Ä—ã –ø—Ä–µ–æ–±—Ä–∞–∂–∞—é—Ç—Å—è. –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –ø–∞–¥–∞–µ—Ç –Ω–∞ <em>4¬∞C –≤ —Ç–µ–Ω–∏</em>.

–î–µ—Ç–∏ –ø—Ä–∏–Ω–æ—Å—è—Ç —Å–µ–º–µ–Ω–∞ –¥–æ–º–æ–π. –†–æ–¥–∏—Ç–µ–ª–∏ –Ω–∞—á–∏–Ω–∞—é—Ç —Å–ø—Ä–∞—à–∏–≤–∞—Ç—å: "–ê –∫–æ–≥–¥–∞ –æ–∑–µ–ª–µ–Ω—è—Ç –Ω–∞—à—É —É–ª–∏—Ü—É?"

<div class="impact-visual">
    <div class="impact-stat">150</div>
    <div class="impact-label">–¥–µ—Ä–µ–≤—å–µ–≤ –ø–æ—Å–∞–∂–µ–Ω–æ ¬∑ 3 —à–∫–æ–ª—ã –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω—ã ¬∑ 600 –¥–µ—Ç–µ–π –≤–æ–≤–ª–µ—á–µ–Ω–æ</div>
</div>

–î–≤–∏–∂–µ–Ω–∏–µ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è. –ß—Ç–æ –¥–∞–ª—å—à–µ?`,
                choices: [
                    { text: "üìö –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É –æ–±—É—á–µ–Ω–∏—è —é–Ω—ã—Ö —Å–∞–¥–æ–≤–Ω–∏–∫–æ–≤", next: -1, impact: "area:2" },
                    { text: "üó∫Ô∏è –†–∞—Å—à–∏—Ä–∏—Ç—å –∫–∞—Ä—Ç—É –∑–µ–ª—ë–Ω—ã—Ö –∫–æ—Ä–∏–¥–æ—Ä–æ–≤ –Ω–∞ –≤–µ—Å—å —Ä–∞–π–æ–Ω", next: -1, impact: "area:5" }
                ]
            },
            {
                text: `–í—ã –≤—ã–±–∏—Ä–∞–µ—Ç–µ <strong>—Å–æ–µ–¥–∏–Ω–∏—Ç—å –∂–∏–ª—ã–µ –∫–≤–∞—Ä—Ç–∞–ª—ã –∂–∏–≤—ã–º –∑–µ–ª—ë–Ω—ã–º –∫–æ—Ä–∏–¥–æ—Ä–æ–º</strong>.

–ú–∞—Ä—à—Ä—É—Ç –∏–¥—ë—Ç –æ—Ç –∞–≤—Ç–æ–±—É—Å–Ω–æ–π –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ —á–µ—Ä–µ–∑ —Ç–æ—Ä–≥–æ–≤—É—é —É–ª–∏—Ü—É –∫ –∂–∏–ª—ã–º –¥–æ–º–∞–º ‚Äî 2 –∫–∏–ª–æ–º–µ—Ç—Ä–∞, –∫–æ—Ç–æ—Ä—ã–µ –ª–µ—Ç–æ–º –ø—Ä–µ–≤—Ä–∞—â–∞—é—Ç—Å—è –≤ —Ä–∞—Å–∫–∞–ª—ë–Ω–Ω—ã–π –∞—Å—Ñ–∞–ª—å—Ç. –¢–µ–ø–µ—Ä—å –∑–¥–µ—Å—å –ø–æ—è–≤–ª—è—é—Ç—Å—è –∞–ª–ª–µ–∏, —Ü–≤–µ—Ç–æ—á–Ω—ã–µ –∫–ª—É–º–±—ã, —Å–∫–∞–º–µ–π–∫–∏ –≤ —Ç–µ–Ω–∏.

–ú–µ—Å—Ç–Ω—ã–µ –∂–∏—Ç–µ–ª–∏ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω—è—é—Ç—Å—è. –ë–∞–±—É—à–∫–∏ –ø—Ä–∏–Ω–æ—Å—è—Ç —Ä–∞—Å—Å–∞–¥—É. –ü–æ–¥—Ä–æ—Å—Ç–∫–∏ —Ä–∞—Å–ø–∏—Å—ã–≤–∞—é—Ç –∫–∞–¥–∫–∏ –¥–ª—è –¥–µ—Ä–µ–≤—å–µ–≤. –£–ª–∏—Ü–∞ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è <em>–º–µ—Å—Ç–æ–º –≤—Å—Ç—Ä–µ—á</em>, –∞ –Ω–µ —Ç—Ä–∞–Ω–∑–∏—Ç–æ–º.

<div class="impact-visual">
    <div class="impact-stat">200</div>
    <div class="impact-label">–¥–µ—Ä–µ–≤—å–µ–≤ –ø–æ—Å–∞–∂–µ–Ω–æ ¬∑ 2 –∫–º –∫–æ—Ä–∏–¥–æ—Ä–∞ ¬∑ 15 —Å–∫–∞–º–µ–µ–∫ –≤ —Ç–µ–Ω–∏</div>
</div>

–°–æ—Å–µ–¥–Ω–∏–π –∫–≤–∞—Ä—Ç–∞–ª –≤–∏–¥–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏ —Ö–æ—á–µ—Ç –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è. –í—ã –≥–æ—Ç–æ–≤—ã —Ä–∞—Å—à–∏—Ä—è—Ç—å—Å—è?`,
                choices: [
                    { text: "üåê –°–æ–∑–¥–∞—Ç—å —Å–µ—Ç—å –∫–æ—Ä–∏–¥–æ—Ä–æ–≤ —á–µ—Ä–µ–∑ –≤–µ—Å—å –≥–æ—Ä–æ–¥", next: -1, impact: "area:10" },
                    { text: "üõ†Ô∏è –£–≥–ª—É–±–∏—Ç—å —Ä–∞–±–æ—Ç—É –∑–¥–µ—Å—å: –¥–æ–±–∞–≤–∏—Ç—å –≤–æ–¥–æ—Å–±–æ—Ä—ã –∏ —Å–∫–≤–æ—Ä–µ—á–Ω–∏–∫–∏", next: -1, impact: "area:3" }
                ]
            },
            {
                text: `–í—ã —Ä–µ—à–∞–µ—Ç–µ <strong>—Ä–∞—Å—à–∏—Ä–∏—Ç—å —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –ø–∞—Ä–∫ –∫–∞–∫ –∑–µ–ª—ë–Ω–æ–µ —Å–µ—Ä–¥—Ü–µ –≥–æ—Ä–æ–¥–∞</strong>.

–°—Ç–∞—Ä—ã–π –ø–∞—Ä–∫ —É–¥–≤–∞–∏–≤–∞–µ—Ç—Å—è –≤ —Ä–∞–∑–º–µ—Ä–µ. –î–æ–±–∞–≤–ª—è—é—Ç—Å—è –Ω–æ–≤—ã–µ –∑–æ–Ω—ã: –¥–µ–Ω–¥—Ä–∞—Ä–∏–π –º–µ—Å—Ç–Ω—ã—Ö –≤–∏–¥–æ–≤, —Å–∞–¥ –æ–ø—ã–ª–∏—Ç–µ–ª–µ–π, –≤–æ–¥–Ω–æ-–±–æ–ª–æ—Ç–Ω–∞—è –∑–æ–Ω–∞ –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ —Å—Ç–æ–∫–æ–≤—ã—Ö –≤–æ–¥. –≠—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ –ø–∞—Ä–∫ ‚Äî —ç—Ç–æ <em>–∂–∏–≤–∞—è –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è –≥–æ—Ä–æ–¥—Å–∫–æ–π —ç–∫–æ–ª–æ–≥–∏–∏</em>.

–£–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç –Ω–∞—á–∏–Ω–∞–µ—Ç –ø—Ä–æ–≤–æ–¥–∏—Ç—å –∑–¥–µ—Å—å –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è. –®–∫–æ–ª—ã –ø—Ä–∏–≤–æ–¥—è—Ç –∫–ª–∞—Å—Å—ã –Ω–∞ —ç–∫—Å–∫—É—Ä—Å–∏–∏. –ñ–∏—Ç–µ–ª–∏ –∏–∑–º–µ—Ä—è—é—Ç —Ä–∞–∑–Ω–∏—Ü—É: –≤–æ–∑–¥—É—Ö —á–∏—â–µ, –ª–µ—Ç–æ –ø—Ä–æ—Ö–ª–∞–¥–Ω–µ–µ, –ø—Ç–∏—Ü –±–æ–ª—å—à–µ.

<div class="impact-visual">
    <div class="impact-stat">300</div>
    <div class="impact-label">–¥–µ—Ä–µ–≤—å–µ–≤ –ø–æ—Å–∞–∂–µ–Ω–æ ¬∑ 5 –≥–∞ —Ä–∞—Å—à–∏—Ä–µ–Ω–æ ¬∑ 40+ –≤–∏–¥–æ–≤ —Ä–∞—Å—Ç–µ–Ω–∏–π</div>
</div>

–ü–∞—Ä–∫ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –º–æ–¥–µ–ª—å—é. –î—Ä—É–≥–∏–µ –≥–æ—Ä–æ–¥–∞ –ø—Ä–∏—Å—ã–ª–∞—é—Ç –¥–µ–ª–µ–≥–∞—Ü–∏–∏. –í—ã –≥–æ—Ç–æ–≤—ã –¥–µ–ª–∏—Ç—å—Å—è –∑–Ω–∞–Ω–∏—è–º–∏?`,
                choices: [
                    { text: "üìñ –°–æ–∑–¥–∞—Ç—å –æ—Ç–∫—Ä—ã—Ç–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –≥–æ—Ä–æ–¥—Å–∫–æ–º—É –æ–∑–µ–ª–µ–Ω–µ–Ω–∏—é", next: -1, impact: "co2:12" },
                    { text: "ü§ù –ü–æ—Å—Ç—Ä–æ–∏—Ç—å —Å–µ—Ç—å –æ–±–º–µ–Ω–∞ –æ–ø—ã—Ç–æ–º –º–µ–∂–¥—É –≥–æ—Ä–æ–¥–∞–º–∏", next: -1, impact: "co2:15" }
                ]
            }
        ]
    },

    seedpaths: {
        title: "–°–µ–º–µ–Ω–Ω—ã–µ —Ç—Ä–æ–ø—ã –¥–ª—è –¥–µ—Ç–µ–π",
        icon: "üå∏",
        nodes: [
            {
                text: `–î–µ—Ç–∏ –∏–¥—É—Ç –≤ —à–∫–æ–ª—É –ø–æ —Å–µ—Ä—ã–º —É–ª–∏—Ü–∞–º, –≥–¥–µ –∫–æ–≥–¥–∞-—Ç–æ –±—ã–ª–∏ —Å–∞–¥—ã. –í—ã –ø–æ–º–Ω–∏—Ç–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –ø—Ä–æ—à–ª–æ–≥–æ –≤–µ–∫–∞: —ç—Ç–∏ –∂–µ —É–ª–∏—Ü—ã –±—ã–ª–∏ –∑–µ–ª—ë–Ω—ã–º–∏ —Ç–æ–Ω–Ω–µ–ª—è–º–∏.

<strong>–ß—Ç–æ –µ—Å–ª–∏ –ø—Ä–µ–≤—Ä–∞—Ç–∏—Ç—å –ø—É—Ç—å –≤ —à–∫–æ–ª—É –≤ –∂–∏–≤–æ–π –∫–ª–∞—Å—Å –ø—Ä–∏—Ä–æ–¥—ã?</strong>

–ò–¥–µ—è –ø—Ä–æ—Å—Ç–∞: –≤–¥–æ–ª—å —à–∫–æ–ª—å–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤ –≤—ã—Å–∞–∂–∏–≤–∞—é—Ç—Å—è —Å—ä–µ–¥–æ–±–Ω—ã–µ –∏ –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ —Ä–∞—Å—Ç–µ–Ω–∏—è. –î–µ—Ç–∏ –Ω–∞–±–ª—é–¥–∞—é—Ç —Ü–∏–∫–ª—ã, —Å–æ–±–∏—Ä–∞—é—Ç —è–≥–æ–¥—ã, —É—á–∞—Ç—Å—è —Ä–∞–∑–ª–∏—á–∞—Ç—å –≤–∏–¥—ã. –¢—Ä–æ–ø–∞ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è <em>—É—á–µ–±–Ω–∏–∫–æ–º –±–µ–∑ —Å—Ç—Ä–∞–Ω–∏—Ü</em>.

–¢—Ä–∏ —à–∫–æ–ª—ã –≥–æ—Ç–æ–≤—ã –Ω–∞—á–∞—Ç—å. –ù–æ –º–∞—Ä—à—Ä—É—Ç—ã —Ä–∞–∑–Ω—ã–µ. –° —á–µ–≥–æ –Ω–∞—á–∞—Ç—å?`,
                choices: [
                    { text: "üçì –°–æ–∑–¥–∞—Ç—å ¬´—è–≥–æ–¥–Ω—É—é —Ç—Ä–æ–ø—É¬ª —Å–æ —Å—ä–µ–¥–æ–±–Ω—ã–º–∏ —Ä–∞—Å—Ç–µ–Ω–∏—è–º–∏", next: 1, impact: "trees:100" },
                    { text: "ü¶ã –°–¥–µ–ª–∞—Ç—å ¬´—Ç—Ä–æ–ø—É –æ–ø—ã–ª–∏—Ç–µ–ª–µ–π¬ª —Å —Ü–≤–µ—Ç—É—â–∏–º–∏ —Ä–∞—Å—Ç–µ–Ω–∏—è–º–∏", next: 2, impact: "trees:120" },
                    { text: "üìö –ü–æ—Å—Ç—Ä–æ–∏—Ç—å ¬´–±–æ—Ç–∞–Ω–∏—á–µ—Å–∫—É—é —Ç—Ä–æ–ø—É¬ª —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–º–∏ —Ç–∞–±–ª–∏—á–∫–∞–º–∏", next: 3, impact: "trees:80" }
                ]
            },
            {
                text: `–ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è <strong>¬´–Ø–≥–æ–¥–Ω–∞—è —Ç—Ä–æ–ø–∞¬ª</strong> ‚Äî 1.5 –∫–∏–ª–æ–º–µ—Ç—Ä–∞ –æ—Ç –∂–∏–ª–æ–≥–æ —Ä–∞–π–æ–Ω–∞ –¥–æ —à–∫–æ–ª—ã.

–í–¥–æ–ª—å –º–∞—Ä—à—Ä—É—Ç–∞ –ø–æ—è–≤–ª—è—é—Ç—Å—è: —Å–º–æ—Ä–æ–¥–∏–Ω–∞, –º–∞–ª–∏–Ω–∞, –æ–±–ª–µ–ø–∏—Ö–∞, —à–∏–ø–æ–≤–Ω–∏–∫, —á–µ—Ä–Ω–æ–ø–ª–æ–¥–Ω–∞—è —Ä—è–±–∏–Ω–∞. –ö–∞–∂–¥–æ–µ —Ä–∞—Å—Ç–µ–Ω–∏–µ –ø–æ–¥–æ–±—Ä–∞–Ω–æ –ø–æ–¥ –º–µ—Å—Ç–Ω—ã–π –∫–ª–∏–º–∞—Ç –∏ —Ç—Ä–µ–±—É–µ—Ç –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ —É—Ö–æ–¥–∞.

–ö –æ—Å–µ–Ω–∏ –¥–µ—Ç–∏ —Å–æ–±–∏—Ä–∞—é—Ç –ø–µ—Ä–≤—ã–π —É—Ä–æ–∂–∞–π. –í —à–∫–æ–ª–µ –ø—Ä–æ–≤–æ–¥–∏—Ç—Å—è <em>¬´–ü—Ä–∞–∑–¥–Ω–∏–∫ –ø–µ—Ä–≤—ã—Ö —è–≥–æ–¥¬ª</em>. –†–æ–¥–∏—Ç–µ–ª–∏ –¥–µ–ª—è—Ç—Å—è —Ä–µ—Ü–µ–ø—Ç–∞–º–∏. –ë–∞–±—É—à–∫–∏ –ø–µ—Ä–µ–¥–∞—é—Ç –∑–Ω–∞–Ω–∏—è –æ –∑–∞–≥–æ—Ç–æ–≤–∫–∞—Ö.

<div class="impact-visual">
    <div class="impact-stat">100</div>
    <div class="impact-label">–∫—É—Å—Ç–∞—Ä–Ω–∏–∫–æ–≤ –ø–æ—Å–∞–∂–µ–Ω–æ ¬∑ 450 —à–∫–æ–ª—å–Ω–∏–∫–æ–≤ –≤–æ–≤–ª–µ—á–µ–Ω–æ ¬∑ 12 –≤–∏–¥–æ–≤ —è–≥–æ–¥</div>
</div>

–î—Ä—É–≥–∏–µ —à–∫–æ–ª—ã —Ö–æ—Ç—è—Ç —Å–≤–æ–∏ —Ç—Ä–æ–ø—ã. –ö–∞–∫ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å?`,
                choices: [
                    { text: "üå± –°–æ–∑–¥–∞—Ç—å ¬´–±–∞–Ω–∫ —Å–µ–º—è–Ω –∏ —Å–∞–∂–µ–Ω—Ü–µ–≤¬ª –¥–ª—è –Ω–æ–≤—ã—Ö —Ç—Ä–æ–ø", next: -1, impact: "area:4" },
                    { text: "üë• –û–±—É—á–∏—Ç—å —Ä–æ–¥–∏—Ç–µ–ª–µ–π –∏ —É—á–∏—Ç–µ–ª–µ–π –∫–∞–∫ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä–æ–≤ —Ç—Ä–æ–ø", next: -1, impact: "area:6" }
                ]
            },
            {
                text: `–í—ã —Å–æ–∑–¥–∞—ë—Ç–µ <strong>¬´–¢—Ä–æ–ø—É –æ–ø—ã–ª–∏—Ç–µ–ª–µ–π¬ª</strong> ‚Äî –Ω–∞—Å—Ç–æ—è—â–∏–π —Ü–≤–µ—Ç—É—â–∏–π –∫–æ—Ä–∏–¥–æ—Ä.

–° —Ä–∞–Ω–Ω–µ–π –≤–µ—Å–Ω—ã –¥–æ –ø–æ–∑–¥–Ω–µ–π –æ—Å–µ–Ω–∏ –∑–¥–µ—Å—å —á—Ç–æ-—Ç–æ —Ü–≤–µ—Ç—ë—Ç: –∫—Ä–æ–∫—É—Å—ã, –æ–¥—É–≤–∞–Ω—á–∏–∫–∏, –∫–ª–µ–≤–µ—Ä, –ª–∞–≤–∞–Ω–¥–∞, –∞—Å—Ç—Ä—ã. –≠—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ –∫—Ä–∞—Å–∏–≤–æ ‚Äî —ç—Ç–æ <em>—Å—Ç–∞–Ω—Ü–∏—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –¥–ª—è –ø—á—ë–ª, –±–∞–±–æ—á–µ–∫ –∏ —à–º–µ–ª–µ–π</em>, –∫–æ—Ç–æ—Ä—ã—Ö –≤ –≥–æ—Ä–æ–¥–µ –ø–æ—á—Ç–∏ –Ω–µ –æ—Å—Ç–∞–ª–æ—Å—å.

–î–µ—Ç–∏ –≤–µ–¥—É—Ç –¥–Ω–µ–≤–Ω–∏–∫–∏ –Ω–∞–±–ª—é–¥–µ–Ω–∏–π: –∫–∞–∫–∏–µ –Ω–∞—Å–µ–∫–æ–º—ã–µ –ø—Ä–∏–ª–µ—Ç–∞—é—Ç, –∫–æ–≥–¥–∞ –ø–æ—è–≤–ª—è—é—Ç—Å—è, –∫–∞–∫ –º–µ–Ω—è–µ—Ç—Å—è –∏—Ö –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ. –ë–∏–æ–ª–æ–≥–∏—è —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∂–∏–≤–æ–π.

<div class="impact-visual">
    <div class="impact-stat">120</div>
    <div class="impact-label">—Ä–∞—Å—Ç–µ–Ω–∏–π –ø–æ—Å–∞–∂–µ–Ω–æ ¬∑ 15 –≤–∏–¥–æ–≤ –æ–ø—ã–ª–∏—Ç–µ–ª–µ–π –≤–µ—Ä–Ω—É–ª–∏—Å—å ¬∑ 3 —É–ª—å—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ</div>
</div>

–ú–µ—Å—Ç–Ω–∞—è –ø–∞—Å–µ–∫–∞ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –ø–∞—Ä—Ç–Ω—ë—Ä—Å—Ç–≤–æ. –ü—Ä–∏–Ω—è—Ç—å?`,
                choices: [
                    { text: "üçØ –î–∞ ‚Äî –∑–∞–ø—É—Å—Ç–∏—Ç—å –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—É—é –ø—Ä–æ–≥—Ä–∞–º–º—É —Å –ø—á–µ–ª–æ–≤–æ–¥–∞–º–∏", next: -1, impact: "area:5" },
                    { text: "üåº –†–∞—Å—à–∏—Ä–∏—Ç—å —Å–µ—Ç—å —Ü–≤–µ—Ç—É—â–∏—Ö —Ç—Ä–æ–ø —á–µ—Ä–µ–∑ –≤–µ—Å—å —Ä–∞–π–æ–Ω", next: -1, impact: "area:8" }
                ]
            },
            {
                text: `–ü–æ—è–≤–ª—è–µ—Ç—Å—è <strong>¬´–ë–æ—Ç–∞–Ω–∏—á–µ—Å–∫–∞—è —Ç—Ä–æ–ø–∞¬ª</strong> ‚Äî –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π –º–∞—Ä—à—Ä—É—Ç —Å QR-–∫–æ–¥–∞–º–∏.

–ö–∞–∂–¥–æ–µ —Ä–∞—Å—Ç–µ–Ω–∏–µ —Å–æ–ø—Ä–æ–≤–æ–∂–¥–∞–µ—Ç—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π: –Ω–∞–∑–≤–∞–Ω–∏–µ –Ω–∞ —Ä—É—Å—Å–∫–æ–º –∏ –ª–∞—Ç—ã–Ω–∏, —ç–∫–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è —Ä–æ–ª—å, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –º–µ–¥–∏—Ü–∏–Ω–µ –∏ –∫—É–ª–∏–Ω–∞—Ä–∏–∏, –∫—É–ª—å—Ç—É—Ä–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ. –î–µ—Ç–∏ —Å–∫–∞–Ω–∏—Ä—É—é—Ç –∫–æ–¥—ã —Ç–µ–ª–µ—Ñ–æ–Ω–∞–º–∏, —É—á–∞—Ç—Å—è –ø—Ä—è–º–æ –Ω–∞ —É–ª–∏—Ü–µ.

–¢—Ä–æ–ø–∞ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è <em>–æ—Ç–∫—Ä—ã—Ç—ã–º –º—É–∑–µ–µ–º –ø—Ä–∏—Ä–æ–¥—ã</em>. –†–æ–¥–∏—Ç–µ–ª–∏ –≤–æ–¥—è—Ç —Å—é–¥–∞ –º–∞–ª—ã—à–µ–π –Ω–∞ –ø—Ä–æ–≥—É–ª–∫–∏. –ü–µ–Ω—Å–∏–æ–Ω–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∫–∞–∫ —Ç–µ—Ä—Ä–µ–Ω–∫—É—Ä.

<div class="impact-visual">
    <div class="impact-stat">80</div>
    <div class="impact-label">–≤–∏–¥–æ–≤ —Ä–∞—Å—Ç–µ–Ω–∏–π ¬∑ 30 –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–æ—á–µ–∫ ¬∑ 1000+ –ø–æ—Å–µ—â–µ–Ω–∏–π –≤ –º–µ—Å—è—Ü</div>
</div>

–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç —Å–æ–∑–¥–∞—Ç—å –∞—É–¥–∏–æ–≥–∏–¥. –ú—É–∑–µ–π ‚Äî –≤—ã—Å—Ç–∞–≤–∫—É —Ä–∞—Å—Ç–µ–Ω–∏–π. –ß—Ç–æ –≤—ã–±—Ä–∞—Ç—å?`,
                choices: [
                    { text: "üéß –°–¥–µ–ª–∞—Ç—å –∞—É–¥–∏–æ–≥–∏–¥ —Å –∏—Å—Ç–æ—Ä–∏—è–º–∏ —Ä–∞—Å—Ç–µ–Ω–∏–π", next: -1, impact: "co2:3" },
                    { text: "üñºÔ∏è –°–æ–∑–¥–∞—Ç—å –ø–µ—Ä–µ–¥–≤–∏–∂–Ω—É—é –≤—ã—Å—Ç–∞–≤–∫—É ¬´–û—Ç —Ç—Ä–æ–ø—ã –∫ –≥–æ—Ä–æ–¥—É¬ª", next: -1, impact: "co2:5" }
                ]
            }
        ]
    },

    dnieper: {
        title: "–î–Ω–µ–ø—Ä–æ–≤—Å–∫–∏–π —ç–∫–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –ø—É—Ç—å",
        icon: "üåä",
        nodes: [
            {
                text: `–í–µ–ª–∏–∫–∞—è —Ä–µ–∫–∞ –î–Ω–µ–ø—Ä —Ç–µ—á—ë—Ç —á–µ—Ä–µ–∑ —Ä–∞–∑–Ω—ã–µ –∑–µ–º–ª–∏, –Ω–µ –≤—ã–±–∏—Ä–∞—è —Å—Ç–æ—Ä–æ–Ω—É. –û–Ω–∞ —Ç–µ—á—ë—Ç —á–µ—Ä–µ–∑ –∏—Å—Ç–æ—Ä–∏—é, —á–µ—Ä–µ–∑ –±–æ–ª—å, —á–µ—Ä–µ–∑ –Ω–∞–¥–µ–∂–¥—É.

<strong>–†–µ–∫–∞ –Ω–µ –∑–Ω–∞–µ—Ç –≥—Ä–∞–Ω–∏—Ü. –û–Ω–∞ –∑–Ω–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Ç–µ—á–µ–Ω–∏–µ.</strong>

–ó–∞–≥—Ä—è–∑–Ω–µ–Ω–∏–µ –Ω–µ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è —É –ª–∏–Ω–∏–π –Ω–∞ –∫–∞—Ä—Ç–µ. –†—ã–±–∞ –Ω–µ —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç –ø–∞—Å–ø–æ—Ä—Ç. –í–æ–¥–∞ —Å–æ–µ–¥–∏–Ω—è–µ—Ç –≤—Å—ë –∂–∏–≤–æ–µ ‚Äî –æ—Ç –∏—Å—Ç–æ–∫–∞ –≤ –†–æ—Å—Å–∏–∏ —á–µ—Ä–µ–∑ –ë–µ–ª–∞—Ä—É—Å—å –¥–æ —É—Å—Ç—å—è –≤ –£–∫—Ä–∞–∏–Ω–µ.

–í—ã ‚Äî —á–∞—Å—Ç—å –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤—ã –ø–æ <em>–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—é —ç–∫–æ—Å–∏—Å—Ç–µ–º—ã –≤–µ–ª–∏–∫–æ–π —Ä–µ–∫–∏</em>. –ù–µ –ø–æ–ª–∏—Ç–∏–∫–∞. –ù–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç. –¢–æ–ª—å–∫–æ –≤–æ–¥–∞, –∑–µ–º–ª—è –∏ –∂–∏–∑–Ω—å.

–° —á–µ–≥–æ –Ω–∞—á–∞—Ç—å –∏—Å—Ü–µ–ª–µ–Ω–∏–µ?`,
                choices: [
                    { text: "üíß –°–æ–∑–¥–∞—Ç—å —Å–æ–≤–º–µ—Å—Ç–Ω—É—é —Å–µ—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∫–∞—á–µ—Å—Ç–≤–∞ –≤–æ–¥—ã", next: 1, impact: "area:50" },
                    { text: "üåæ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–±—Ä–µ–∂–Ω—ã–µ –≤–æ–¥–Ω–æ-–±–æ–ª–æ—Ç–Ω—ã–µ —É–≥–æ–¥—å—è", next: 2, impact: "area:100" },
                    { text: "üêü –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —Ä—ã–±–Ω—ã—Ö –ø–æ–ø—É–ª—è—Ü–∏–π", next: 3, impact: "trees:500" }
                ]
            },
            {
                text: `–ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è <strong>—Å–æ–≤–º–µ—Å—Ç–Ω–∞—è —Å–µ—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –î–Ω–µ–ø—Ä–∞</strong>.

–£—á—ë–Ω—ã–µ, –∞–∫—Ç–∏–≤–∏—Å—Ç—ã, —Ä—ã–±–∞–∫–∏ –∏–∑ —Ä–∞–∑–Ω—ã—Ö —Å—Ç—Ä–∞–Ω —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç –¥–∞—Ç—á–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ –≤–æ–¥—ã. –î–∞–Ω–Ω—ã–µ –ø—É–±–ª–∏–∫—É—é—Ç—Å—è –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –¥–æ—Å—Ç—É–ø–µ ‚Äî –±–µ–∑ —Ü–µ–Ω–∑—É—Ä—ã, –±–µ–∑ –º–∞–Ω–∏–ø—É–ª—è—Ü–∏–π. <em>–†–µ–∫–∞ –≥–æ–≤–æ—Ä–∏—Ç –ø—Ä–∞–≤–¥—É</em>.

–ü–µ—Ä–≤—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —à–æ–∫–∏—Ä—É—é—Ç: –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω—ã–µ —Å—Ç–æ–∫–∏, —Å–µ–ª—å—Å–∫–æ—Ö–æ–∑—è–π—Å—Ç–≤–µ–Ω–Ω—ã–µ —É–¥–æ–±—Ä–µ–Ω–∏—è, —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ –æ—á–∏—Å—Ç–Ω—ã–µ —Å–æ–æ—Ä—É–∂–µ–Ω–∏—è. –ù–æ —Ç–µ–ø–µ—Ä—å –µ—Å—Ç—å –∫–∞—Ä—Ç–∞. –¢–µ–ø–µ—Ä—å –≤–∏–¥–Ω–æ, –≥–¥–µ –¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å.

<div class="impact-visual">
    <div class="impact-stat">120</div>
    <div class="impact-label">—Ç–æ—á–µ–∫ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ ¬∑ 50 –∫–º —Ä–µ–∫–∏ –ø–æ–¥ –Ω–∞–±–ª—é–¥–µ–Ω–∏–µ–º ¬∑ –¥–∞–Ω–Ω—ã–µ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏</div>
</div>

–°–æ–æ–±—â–µ—Å—Ç–≤–∞ –Ω–∞—á–∏–Ω–∞—é—Ç —Ç—Ä–µ–±–æ–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏–π. –í–æ–¥–∞ –Ω–µ –ª–∂—ë—Ç. –ß—Ç–æ –¥–∞–ª—å—à–µ?`,
                choices: [
                    { text: "üìä –°–æ–∑–¥–∞—Ç—å –ø—É–±–ª–∏—á–Ω—É—é –ø–ª–∞—Ç—Ñ–æ—Ä–º—É —ç–∫–æ–ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö", next: -1, impact: "area:80" },
                    { text: "‚öñÔ∏è –ò–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞—Ç—å —Å–æ–≤–º–µ—Å—Ç–Ω—ã–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç—ã –æ—Ö—Ä–∞–Ω—ã —Ä–µ–∫–∏", next: -1, impact: "area:120" }
                ]
            },
            {
                text: `–ù–∞—á–∏–Ω–∞–µ—Ç—Å—è <strong>–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–±—Ä–µ–∂–Ω—ã—Ö –≤–æ–¥–Ω–æ-–±–æ–ª–æ—Ç–Ω—ã—Ö —É–≥–æ–¥–∏–π –î–Ω–µ–ø—Ä–∞</strong>.

–≠—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ –±–æ–ª–æ—Ç–∞ ‚Äî —ç—Ç–æ <em>–ø—Ä–∏—Ä–æ–¥–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã, –ø–æ–≥–ª–æ—Ç–∏—Ç–µ–ª–∏ —É–≥–ª–µ—Ä–æ–¥–∞, –∏–Ω–∫—É–±–∞—Ç–æ—Ä—ã –∂–∏–∑–Ω–∏</em>. –ó–¥–µ—Å—å –Ω–µ—Ä–µ—Å—Ç—è—Ç—Å—è —Ä—ã–±—ã, –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –ø–µ—Ä–µ–ª—ë—Ç–Ω—ã–µ –ø—Ç–∏—Ü—ã, –æ—á–∏—â–∞–µ—Ç—Å—è –≤–æ–¥–∞ –ø–µ—Ä–µ–¥ –ø–æ–ø–∞–¥–∞–Ω–∏–µ–º –≤ —Ä–µ–∫—É.

–†–∞–±–æ—Ç–∞—é—Ç –≤—Å–µ: —ç–∫–æ–ª–æ–≥–∏ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç –≥–∏–¥—Ä–æ–ª–æ–≥–∏—é, –±–æ—Ç–∞–Ω–∏–∫–∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –º–µ—Å—Ç–Ω—ã–µ —Ä–∞—Å—Ç–µ–Ω–∏—è, –º–µ—Å—Ç–Ω—ã–µ –∂–∏—Ç–µ–ª–∏ –∑–∞—â–∏—â–∞—é—Ç –Ω–æ–≤—ã–µ —É–≥–æ–¥—å—è –æ—Ç –æ—Å—É—à–µ–Ω–∏—è.

<div class="impact-visual">
    <div class="impact-stat">200</div>
    <div class="impact-label">–≥–µ–∫—Ç–∞—Ä–æ–≤ —É–≥–æ–¥–∏–π –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ ¬∑ 40 –≤–∏–¥–æ–≤ –ø—Ç–∏—Ü –≤–µ—Ä–Ω—É–ª–∏—Å—å ¬∑ –≤–æ–¥–∞ —á–∏—â–µ –Ω–∞ 30%</div>
</div>

–ß–µ—Ä–µ–∑ –≥–æ–¥ –ø—Ä–∏–±—Ä–µ–∂–Ω—ã–µ —É–≥–æ–¥—å—è —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –∑–µ–ª—ë–Ω—ã–º–∏ –∫–æ—Ä–∏–¥–æ—Ä–∞–º–∏ –≤–¥–æ–ª—å –≤—Å–µ–π —Ä–µ–∫–∏. –†–∞—Å—à–∏—Ä—è—Ç—å?`,
                choices: [
                    { text: "üåç –î–∞ ‚Äî —Å–æ–∑–¥–∞—Ç—å —Ç—Ä–∞–Ω—Å–≥—Ä–∞–Ω–∏—á–Ω—ã–π —ç–∫–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –∫–æ—Ä–∏–¥–æ—Ä", next: -1, impact: "area:300" },
                    { text: "üî¨ –£–≥–ª—É–±–∏—Ç—å –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ: —Å–æ–∑–¥–∞—Ç—å –ø–æ–ª–µ–≤—É—é —Å—Ç–∞–Ω—Ü–∏—é", next: -1, impact: "co2:25" }
                ]
            },
            {
                text: `–ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è <strong>–ø—Ä–æ–≥—Ä–∞–º–º–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —Ä—ã–±–Ω—ã—Ö –ø–æ–ø—É–ª—è—Ü–∏–π –î–Ω–µ–ø—Ä–∞</strong>.

–û—Å–µ—Ç—Ä–æ–≤—ã–µ, —Å–æ–º—ã, —Å—É–¥–∞–∫–∏, –∫–∞—Ä–ø—ã ‚Äî –≤–∏–¥—ã, –∫–æ—Ç–æ—Ä—ã–µ –∫–æ–≥–¥–∞-—Ç–æ –∫–æ—Ä–º–∏–ª–∏ –≥–æ—Ä–æ–¥–∞, —Ç–µ–ø–µ—Ä—å –Ω–∞ –≥—Ä–∞–Ω–∏ –∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏—è. –°–æ–∑–¥–∞—é—Ç—Å—è —Ä—ã–±–æ—Ä–∞–∑–≤–æ–¥–Ω—ã–µ —Å—Ç–∞–Ω—Ü–∏–∏. –ó–∞–ø—Ä–µ—â–∞–µ—Ç—Å—è –±—Ä–∞–∫–æ–Ω—å–µ—Ä—Å—Ç–≤–æ. –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –Ω–µ—Ä–µ—Å—Ç–∏–ª–∏—â–∞.

–†—ã–±–∞–∫–∏ –∏–∑ —Ä–∞–∑–Ω—ã—Ö —Ä–µ–≥–∏–æ–Ω–æ–≤ –æ–±–º–µ–Ω–∏–≤–∞—é—Ç—Å—è –∑–Ω–∞–Ω–∏—è–º–∏. <em>–†–µ–∫–∞ –±–æ–ª—å—à–µ, —á–µ–º –ø–æ–ª–∏—Ç–∏–∫–∞</em>. –î–µ—Ç–∏ –≤—ã–ø—É—Å–∫–∞—é—Ç –º–∞–ª—å–∫–æ–≤ –≤ –≤–æ–¥—É ‚Äî —Ä–∏—Ç—É–∞–ª –Ω–∞–¥–µ–∂–¥—ã.

<div class="impact-visual">
    <div class="impact-stat">500,000</div>
    <div class="impact-label">–º–∞–ª—å–∫–æ–≤ –≤—ã–ø—É—â–µ–Ω–æ ¬∑ 15 –≤–∏–¥–æ–≤ –ø–æ–¥ –∑–∞—â–∏—Ç–æ–π ¬∑ –ø–æ–ø—É–ª—è—Ü–∏–∏ —Ä–∞—Å—Ç—É—Ç</div>
</div>

–ß–µ—Ä–µ–∑ 5 –ª–µ—Ç —Ä—ã–±–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è. –≠–∫–æ—Å–∏—Å—Ç–µ–º–∞ –¥—ã—à–∏—Ç. –ß—Ç–æ –¥–∞–ª—å—à–µ?`,
                choices: [
                    { text: "üé£ –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É —É—Å—Ç–æ–π—á–∏–≤–æ–≥–æ —Ä—ã–±–æ–ª–æ–≤—Å—Ç–≤–∞", next: -1, impact: "co2:20" },
                    { text: "üìö –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–ª—è –¥—Ä—É–≥–∏—Ö —Ä–µ–∫", next: -1, impact: "co2:30" }
                ]
            }
        ]
    }
};

/* ==========================================================
   INDEXEDDB STATE PERSISTENCE
   ========================================================== */
let db;
const DB_NAME = "seed_paths_unity_ru_evolved";
const STORE = "state";

function initDB() {
    return new Promise((resolve) => {
        const req = indexedDB.open(DB_NAME, 1);
        req.onupgradeneeded = (e) => {
            const database = e.target.result;
            if (!database.objectStoreNames.contains(STORE)) {
                database.createObjectStore(STORE);
            }
        };
        req.onsuccess = (e) => {
            db = e.target.result;
            resolve();
        };
        req.onerror = () => resolve(); // Fail gracefully
    });
}

function saveState(key, value) {
    if (!db) return;
    try {
        const tx = db.transaction(STORE, "readwrite");
        tx.objectStore(STORE).put(value, key);
    } catch (e) {
        console.error("Save state error:", e);
    }
}

function loadState(key) {
    if (!db) return Promise.resolve(null);
    return new Promise((resolve) => {
        try {
            const tx = db.transaction(STORE, "readonly");
            const req = tx.objectStore(STORE).get(key);
            req.onsuccess = () => resolve(req.result || null);
            req.onerror = () => resolve(null);
        } catch (e) {
            resolve(null);
        }
    });
}

/* ==========================================================
   PROGRESS TRACKING
   ========================================================== */
let progressData = {
    completedScenarios: [],
    decisions: 0,
    paths: 3,
    achievements: []
};

async function loadProgress() {
    const saved = await loadState("progress");
    if (saved) {
        progressData = saved;
    }
    updateProgressBadge();
    updateMenuCompletion();
}

function saveProgress() {
    saveState("progress", progressData);
    updateProgressBadge();
    updateMenuCompletion();
}

function markScenarioComplete(pathId) {
    if (!progressData.completedScenarios.includes(pathId)) {
        progressData.completedScenarios.push(pathId);
        checkAchievements(pathId);
        saveProgress();
    }
}

function incrementDecisions() {
    progressData.decisions++;
    saveProgress();
}

function checkAchievements(pathId) {
    const achievements = [
        { id: "first", title: "–ü–µ—Ä–≤—ã–µ —à–∞–≥–∏", desc: "–ó–∞–≤–µ—Ä—à–∏—Ç—å –ø–µ—Ä–≤—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π", icon: "üå±", check: () => progressData.completedScenarios.length >= 1 },
        { id: "urban", title: "–ì–æ—Ä–æ–¥—Å–∫–æ–π –ª–µ—Å–æ–≤–æ–¥", desc: "–ó–∞–≤–µ—Ä—à–∏—Ç—å –≥–æ—Ä–æ–¥—Å–∫–∏–µ –∫–æ—Ä–∏–¥–æ—Ä—ã", icon: "üå≥", check: () => progressData.completedScenarios.includes("canopy_1") },
        { id: "seeds", title: "–°–µ—è—Ç–µ–ª—å –ø—É—Ç–µ–π", desc: "–ó–∞–≤–µ—Ä—à–∏—Ç—å —Å–µ–º–µ–Ω–Ω—ã–µ —Ç—Ä–æ–ø—ã", icon: "üå∏", check: () => progressData.completedScenarios.includes("seedpaths_1") },
        { id: "river", title: "–•—Ä–∞–Ω–∏—Ç–µ–ª—å —Ä–µ–∫–∏", desc: "–ó–∞–≤–µ—Ä—à–∏—Ç—å –¥–Ω–µ–ø—Ä–æ–≤—Å–∫–∏–π –ø—É—Ç—å", icon: "üåä", check: () => progressData.completedScenarios.includes("dnieper_1") },
        { id: "complete", title: "–ú–∞—Å—Ç–µ—Ä –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è", desc: "–ó–∞–≤–µ—Ä—à–∏—Ç—å –≤—Å–µ 9 —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤", icon: "‚≠ê", check: () => progressData.completedScenarios.length >= 9 },
        { id: "decisions", title: "–ê–≥–µ–Ω—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π", desc: "–ü—Ä–∏–Ω—è—Ç—å 25+ —Ä–µ—à–µ–Ω–∏–π", icon: "üéØ", check: () => progressData.decisions >= 25 }
    ];

    achievements.forEach(ach => {
        if (ach.check() && !progressData.achievements.includes(ach.id)) {
            progressData.achievements.push(ach.id);
        }
    });
}

function updateProgressBadge() {
    const badge = document.getElementById("progressBadge");
    const text = document.getElementById("progressText");
    const total = 9; // 3 paths √ó 3 scenarios each
    const completed = progressData.completedScenarios.length;
    
    text.textContent = `${completed} –∏–∑ ${total} –ø—Ä–æ–π–¥–µ–Ω–æ`;
    badge.style.display = completed > 0 ? "flex" : "none";
}

function updateMenuCompletion() {
    progressData.completedScenarios.forEach(scenarioId => {
        const pathId = scenarioId.split("_")[0];
        const card = document.querySelector(`[data-path="${pathId}"]`);
        if (card) {
            card.classList.add("completed");
            const status = card.querySelector(".choice-card-status");
            if (status) status.style.display = "block";
        }
    });
}

/* ==========================================================
   UI NAVIGATION
   ========================================================== */
function showMenu() {
    hideAll();
    document.getElementById("menu").style.display = "block";
    document.getElementById("progressBadge").style.display = 
        progressData.completedScenarios.length > 0 ? "flex" : "none";
}

function showProgress() {
    hideAll();
    const page = document.getElementById("progressPage");
    page.style.display = "block";
    renderProgressPage();
}

function goBack() {
    hideAll();
    document.getElementById("menu").style.display = "block";
}

function goBackToMenu() {
    hideAll();
    document.getElementById("menu").style.display = "block";
}

function hideAll() {
    document.getElementById("splash").style.display = "none";
    document.getElementById("menu").style.display = "none";
    document.getElementById("storyPage").style.display = "none";
    document.getElementById("progressPage").style.display = "none";
}

/* ==========================================================
   STORY NAVIGATION
   ========================================================== */
let currentPath = null;
let currentNode = 0;

async function openStory(pathId, nodeIndex) {
    currentPath = pathId;
    currentNode = nodeIndex;
    
    hideAll();
    const page = document.getElementById("storyPage");
    const textDiv = document.getElementById("storyText");
    const choicesDiv = document.getElementById("storyChoices");
    
    const story = storyData[pathId];
    const node = story.nodes[nodeIndex];
    
    // Render story text
    textDiv.innerHTML = `<h2>${story.icon} ${story.title}</h2>${node.text}`;
    
    // Render choices
    choicesDiv.innerHTML = "";
    
    if (node.choices) {
        node.choices.forEach((choice, idx) => {
            const btn = document.createElement("button");
            btn.className = "story-choice-btn";
            btn.textContent = choice.text;
            btn.onclick = () => handleChoice(choice, idx);
            btn.setAttribute("aria-label", choice.text);
            choicesDiv.appendChild(btn);
        });
    } else {
        // End of story
        const completeBtn = document.createElement("button");
        completeBtn.className = "btn btn-primary";
        completeBtn.innerHTML = '<span aria-hidden="true">‚úì</span> –°—Ü–µ–Ω–∞—Ä–∏–π –∑–∞–≤–µ—Ä—à—ë–Ω';
        completeBtn.onclick = () => {
            markScenarioComplete(`${pathId}_${nodeIndex}`);
            goBack();
        };
        choicesDiv.appendChild(completeBtn);
    }
    
    page.style.display = "block";
    
    // Save current state
    await saveState("currentPath", pathId);
    await saveState("currentNode", nodeIndex);
}

function handleChoice(choice, idx) {
    incrementDecisions();
    
    if (choice.impact) {
        applyImpact(choice.impact);
    }
    
    if (choice.next === -1) {
        // End of branch
        markScenarioComplete(`${currentPath}_${currentNode}_${idx}`);
        
        const textDiv = document.getElementById("storyText");
        const choicesDiv = document.getElementById("storyChoices");
        
        textDiv.innerHTML += `
            <div class="impact-visual" style="margin-top:30px;">
                <div class="impact-label">
                    <strong>üéâ –≠—Ç–æ—Ç –ø—É—Ç—å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –∑–∞–≤–µ—Ä—à—ë–Ω!</strong><br>
                    –í–∞—à–∏ —Ä–µ—à–µ–Ω–∏—è —Å–æ–∑–¥–∞—é—Ç —Ä–µ–∞–ª—å–Ω–æ–µ –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏–µ.
                </div>
            </div>
        `;
        
        choicesDiv.innerHTML = `
            <button class="btn btn-primary" onclick="goBack()">
                <span aria-hidden="true">‚Üê</span> –í—ã–±—Ä–∞—Ç—å –¥—Ä—É–≥–æ–π –ø—É—Ç—å
            </button>
            <button class="btn" onclick="showProgress()">
                <span aria-hidden="true">üìä</span> –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –æ–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å
            </button>
        `;
    } else {
        openStory(currentPath, choice.next);
    }
}

function applyImpact(impactStr) {
    // Parse impact string like "trees:150" or "area:5" or "co2:12"
    const [type, value] = impactStr.split(":");
    const num = parseInt(value);
    
    if (!progressData.impact) {
        progressData.impact = { trees: 0, area: 0, co2: 0 };
    }
    
    if (type === "trees") progressData.impact.trees += num;
    if (type === "area") progressData.impact.area += num;
    if (type === "co2") progressData.impact.co2 += num;
    
    saveProgress();
}

function resetStory() {
    if (confirm("–ù–∞—á–∞—Ç—å —ç—Ç–æ—Ç —Å—Ü–µ–Ω–∞—Ä–∏–π –∑–∞–Ω–æ–≤–æ? –ü—Ä–æ–≥—Ä–µ—Å—Å –±—É–¥–µ—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω.")) {
        openStory(currentPath, 0);
    }
}

/* ==========================================================
   PROGRESS PAGE RENDERING
   ========================================================== */
function renderProgressPage() {
    const total = 9;
    const completed = progressData.completedScenarios.length;
    const percentage = Math.round((completed / total) * 100);
    
    // Update progress bar
    document.getElementById("totalProgressBar").style.width = `${percentage}%`;
    document.getElementById("totalProgressText").textContent = `${completed} –∏–∑ ${total}`;
    
    // Update stats
    document.getElementById("scenariosCompleted").textContent = completed;
    document.getElementById("decisionsMade").textContent = progressData.decisions;
    document.getElementById("pathsExplored").textContent = progressData.paths;
    
    // Render achievements
    const achievementsList = document.getElementById("achievementsList");
    const allAchievements = [
        { id: "first", title: "–ü–µ—Ä–≤—ã–µ —à–∞–≥–∏", desc: "–ó–∞–≤–µ—Ä—à–∏—Ç—å –ø–µ—Ä–≤—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π", icon: "üå±" },
        { id: "urban", title: "–ì–æ—Ä–æ–¥—Å–∫–æ–π –ª–µ—Å–æ–≤–æ–¥", desc: "–ó–∞–≤–µ—Ä—à–∏—Ç—å –≥–æ—Ä–æ–¥—Å–∫–∏–µ –∫–æ—Ä–∏–¥–æ—Ä—ã", icon: "üå≥" },
        { id: "seeds", title: "–°–µ—è—Ç–µ–ª—å –ø—É—Ç–µ–π", desc: "–ó–∞–≤–µ—Ä—à–∏—Ç—å —Å–µ–º–µ–Ω–Ω—ã–µ —Ç—Ä–æ–ø—ã", icon: "üå∏" },
        { id: "river", title: "–•—Ä–∞–Ω–∏—Ç–µ–ª—å —Ä–µ–∫–∏", desc: "–ó–∞–≤–µ—Ä—à–∏—Ç—å –¥–Ω–µ–ø—Ä–æ–≤—Å–∫–∏–π –ø—É—Ç—å", icon: "üåä" },
        { id: "complete", title: "–ú–∞—Å—Ç–µ—Ä –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è", desc: "–ó–∞–≤–µ—Ä—à–∏—Ç—å –≤—Å–µ 9 —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤", icon: "‚≠ê" },
        { id: "decisions", title: "–ê–≥–µ–Ω—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π", desc: "–ü—Ä–∏–Ω—è—Ç—å 25+ —Ä–µ—à–µ–Ω–∏–π", icon: "üéØ" }
    ];
    
    achievementsList.innerHTML = "";
    
    if (progressData.achievements.length === 0) {
        achievementsList.innerHTML = `<p style="opacity:0.6; text-align:center;">–ó–∞–≤–µ—Ä—à–∏—Ç–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –¥–ª—è —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π</p>`;
    } else {
        progressData.achievements.forEach(achId => {
            const ach = allAchievements.find(a => a.id === achId);
            if (ach) {
                const div = document.createElement("div");
                div.className = "achievement";
                div.innerHTML = `
                    <div class="achievement-icon" aria-hidden="true">${ach.icon}</div>
                    <div class="achievement-text">
                        <div class="achievement-title">${ach.title}</div>
                        <div class="achievement-desc">${ach.desc}</div>
                    </div>
                `;
                achievementsList.appendChild(div);
            }
        });
    }
    
    // Update impact metrics
    const impact = progressData.impact || { trees: 0, area: 0, co2: 0 };
    document.getElementById("impactTrees").textContent = impact.trees.toLocaleString();
    document.getElementById("impactArea").textContent = impact.area.toLocaleString();
    document.getElementById("impactCO2").textContent = impact.co2.toLocaleString();
}

function exportProgress() {
    const dataStr = JSON.stringify(progressData, null, 2);
    const dataBlob = new Blob([dataStr], { type: 'application/json' });
    const url = URL.createObjectURL(dataBlob);
    const link = document.createElement('a');
    link.href = url;
    link.download = `seed-paths-unity-progress-${Date.now()}.json`;
    link.click();
    URL.revokeObjectURL(url);
}

/* ==========================================================
   INITIALIZATION
   ========================================================== */
async function init() {
    await initDB();
    await loadProgress();
    
    // Restore last position if available
    const lastPath = await loadState("currentPath");
    const lastNode = await loadState("currentNode");
    
    if (lastPath && lastNode !== null) {
        // Ask user if they want to continue
        setTimeout(() => {
            if (confirm("–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Å –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –º–µ—Å—Ç–∞?")) {
                openStory(lastPath, lastNode);
            }
        }, 1000);
    }
}

// Keyboard navigation
document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
        const storyPage = document.getElementById("storyPage");
        const progressPage = document.getElementById("progressPage");
        
        if (storyPage.style.display === "block") goBack();
        if (progressPage.style.display === "block") goBackToMenu();
    }
});

// Initialize on load
init();
</script>

</body>
</html>
